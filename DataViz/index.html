<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<title>Happiness</title>
	<link rel="stylesheet" href="styles.css">
</head>

<style>
	
	
</style>

<body onload=initialiseData()>

<nav>
  <ul>
    <li><strong>Home</strong></li>
    <li><a href="scene2.html">Top Happiness Factor</a></li>
    <li><a href="secene3.html">Other Happiness Factors</a></li>
    
  </ul>
</nav>


	
	<h1>World Happiness Report 2017</h1>
	<div id="wrapper">
	</div>

    


    <div id="tooltip"></div>

	<!-- <div class="data-view"></div> -->

	<script src='https://d3js.org/d3.v5.min.js'></script>
	<script>

	var myData = [];
	var barWidth = 400;
	var barScale = d3.scaleLinear().domain([1, 10]).range([0, barWidth]);
	var tooltip = d3.select("#tooltip");


	async function  initialiseData() {
	    myData = await d3.csv("https://ashagp2.github.io/mcs-ds/DataViz/2017.csv")
		update();

	}

	function updateBars(data) {
		var u = d3.select('#wrapper')
			.selectAll('.country')
			.data(data, function(d) {
				return d.Country;
			});

		var entering = u.enter()
			.append('div')
			.classed('country', true);

		entering.append('div')
			.classed('label', true)
			.text(function(d) {
				return d.Country;
			});

		entering.append('div')
			.classed('bar', true)
			.on("mouseover", function(d,i) {
                tooltip.style("opacity", 1)
               .style("left",(d3.event.pageX)+"px")
               .style("top",(d3.event.pageY)+"px")
               .html("Happiness Score is "+" is "+ d.HappinessScore);
             })
            .on("mouseout", function() { tooltip.style("opacity", 0) });
            

		entering
			.merge(u)
			.select('.bar')
			.transition()
			.style('width', function(d) {
				return barScale(d.HappinessScore) + 'px';
			});

		u.exit().remove();
	}

	

	
	function update() {
		updateBars(myData);
	}


	</script>
</body>
</html>
